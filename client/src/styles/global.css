/**
 * Global Styles for Code-Sync
 * Modern, accessible styling with smooth animations
 * Supports light and dark themes with CSS variables
 */

@import url("tldraw/tldraw.css");

/* Import modern font families */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base layer - CSS Variables for theming */
@layer base {
    :root {
        /* Light mode colors */
        --color-bg-primary: #ffffff;
        --color-bg-secondary: #fafafa;
        --color-bg-tertiary: #f5f5f5;
        --color-bg-elevated: #ffffff;
        --color-bg-overlay: rgba(0, 0, 0, 0.45);
        
        --color-text-primary: #262626;
        --color-text-secondary: #595959;
        --color-text-tertiary: #8c8c8c;
        --color-text-disabled: #bfbfbf;
        --color-text-inverse: #ffffff;
        
        --color-border-default: #d9d9d9;
        --color-border-light: #e8e8e8;
        --color-border-strong: #bfbfbf;
        --color-border-focus: #40a9ff;
        
        /* Scrollbar colors */
        --sb-track-color: #f5f5f5;
        --sb-thumb-color: #bfbfbf;
        --sb-thumb-hover-color: #8c8c8c;
        --sb-size: 8px;
    }
    
    .dark {
        /* Dark mode colors */
        --color-bg-primary: #141414;
        --color-bg-secondary: #1f1f1f;
        --color-bg-tertiary: #262626;
        --color-bg-elevated: #1f1f1f;
        --color-bg-overlay: rgba(0, 0, 0, 0.65);
        
        --color-text-primary: #ffffff;
        --color-text-secondary: #d9d9d9;
        --color-text-tertiary: #8c8c8c;
        --color-text-disabled: #595959;
        --color-text-inverse: #141414;
        
        --color-border-default: #434343;
        --color-border-light: #303030;
        --color-border-strong: #595959;
        --color-border-focus: #1890ff;
        
        /* Scrollbar colors for dark mode */
        --sb-track-color: #262626;
        --sb-thumb-color: #595959;
        --sb-thumb-hover-color: #8c8c8c;
    }
    
    html {
        @apply scroll-smooth;
    }
    
    body {
        @apply font-sans antialiased;
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
        background-color: var(--color-bg-primary);
        color: var(--color-text-primary);
        transition: background-color 0.3s ease, color 0.3s ease;
    }
}

/* Component layer - Reusable component styles */
@layer components {
    /* Typography components */
    .view-title {
        @apply mb-3 w-full border-b border-neutral-700 dark:border-neutral-700 pb-3 text-start text-lg font-semibold tracking-tight;
    }
    
    .section-title {
        @apply text-base font-semibold text-neutral-800 dark:text-neutral-200 mb-2;
    }
    
    /* Button components */
    .btn-primary {
        @apply px-4 py-2.5 bg-primary-500 hover:bg-primary-600 active:bg-primary-700 
               text-white font-medium rounded-lg shadow-sm hover:shadow-md
               transition-all duration-200 ease-in-out
               focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
               disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-primary-500;
    }
    
    .btn-secondary {
        @apply px-4 py-2.5 bg-neutral-200 hover:bg-neutral-300 active:bg-neutral-400
               dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:active:bg-neutral-600
               text-neutral-900 dark:text-neutral-100 font-medium rounded-lg shadow-sm
               transition-all duration-200 ease-in-out
               focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-offset-2
               disabled:opacity-50 disabled:cursor-not-allowed;
    }
    
    .btn-ghost {
        @apply px-4 py-2.5 bg-transparent hover:bg-neutral-100 active:bg-neutral-200
               dark:hover:bg-neutral-800 dark:active:bg-neutral-700
               text-neutral-700 dark:text-neutral-300 font-medium rounded-lg
               transition-all duration-200 ease-in-out
               focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-offset-2;
    }
    
    .btn-icon {
        @apply p-2 rounded-lg transition-all duration-200 ease-in-out
               hover:bg-neutral-200 dark:hover:bg-neutral-800
               active:bg-neutral-300 dark:active:bg-neutral-700
               focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1;
    }
    
    /* Input components */
    .input-field {
        @apply w-full px-4 py-2.5 rounded-lg border border-neutral-300 dark:border-neutral-700
               bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100
               placeholder:text-neutral-400 dark:placeholder:text-neutral-600
               focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
               transition-all duration-200 ease-in-out
               disabled:bg-neutral-100 dark:disabled:bg-neutral-800 disabled:cursor-not-allowed;
    }
    
    /* Card components */
    .card {
        @apply bg-white dark:bg-neutral-900 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-800
               transition-all duration-200 ease-in-out;
    }
    
    .card-hover {
        @apply card hover:shadow-md hover:border-neutral-300 dark:hover:border-neutral-700;
    }
    
    /* Badge components */
    .badge {
        @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    }
    
    .badge-primary {
        @apply badge bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300;
    }
    
    .badge-success {
        @apply badge bg-success-100 text-success-700 dark:bg-success-900 dark:text-success-300;
    }
    
    .badge-warning {
        @apply badge bg-warning-100 text-warning-700 dark:bg-warning-900 dark:text-warning-300;
    }
    
    .badge-danger {
        @apply badge bg-danger-100 text-danger-700 dark:bg-danger-900 dark:text-danger-300;
    }
}

/* Utilities layer - Custom utilities */
@layer utilities {
    .text-balance {
        text-wrap: balance;
    }
    
    .animate-in {
        animation: fade-in 0.3s ease-out;
    }
    
    .blur-bg {
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }
}

/* Custom Scrollbar - Modern, subtle design */
::-webkit-scrollbar {
    width: var(--sb-size);
    height: var(--sb-size);
}

::-webkit-scrollbar-track {
    background: var(--sb-track-color);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--sb-thumb-color);
    border-radius: 10px;
    transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--sb-thumb-hover-color);
}

/* Firefox scrollbar */
@supports not selector(::-webkit-scrollbar) {
    * {
        scrollbar-width: thin;
        scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
    }
}

/* CodeMirror Editor Styles */
.cm-editor {
    max-height: 93vh;
    @apply rounded-lg border border-neutral-200 dark:border-neutral-800;
}

.cm-editor .cm-scroller {
    font-family: "JetBrains Mono", "Fira Code", monospace;
    @apply text-sm;
}

.cm-editor .cm-gutters {
    @apply bg-neutral-50 dark:bg-neutral-900 border-r border-neutral-200 dark:border-neutral-800;
}

@media screen and (max-width: 768px) {
    .cm-editor {
        max-height: calc(93vh - 60px);
    }
    
    .cm-editor .cm-scroller {
        min-height: calc(93vh - 60px);
    }
}

/* Select/Dropdown Custom Styling */
select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
}

/* Focus visible for accessibility */
*:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-neutral-900;
}

/* Smooth transitions for interactive elements */
a, button, input, select, textarea {
    @apply transition-colors duration-200 ease-in-out;
}

/* GitHub Corner Animation */
.github-corner:hover .octo-arm {
    animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
    0%, 100% {
        transform: rotate(0);
    }
    20%, 60% {
        transform: rotate(-25deg);
    }
    40%, 80% {
        transform: rotate(10deg);
    }
}

/* Loading spinner */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Fade in animation */
@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Accessibility: Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
